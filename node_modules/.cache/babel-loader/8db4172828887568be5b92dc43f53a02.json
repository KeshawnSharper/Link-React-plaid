{"ast":null,"code":"var _jsxFileName = \"/Users/keshawnsharper/Documents/Link-React-plaid/src/Link.js\";\nimport React, { Component } from \"react\";\nimport { PlaidLink } from \"react-plaid-link\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Link extends Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = async () => {\n      var response = await axios.post(\"http://localhost:3000/link_token\").then();\n      console.log(response.data);\n      this.setState({\n        linkToken: response.data[\"link_token\"]\n      });\n    };\n\n    this.handleOnSuccess = async (public_token, metadata) => {\n      // send token to client server\n      var data = {\n        public_token: public_token,\n        // use this as the dummy user for now \n        user_id: 1\n      };\n      var response = await axios.post(\"http://localhost:3000/sync_user_to_bank_account\", data);\n      console.log(\"response\", response); //to do set accessToken into sessionStorage then move onto UI calls in other components.\n\n      localStorage.setItem(\"accessToken\", response.data[\"access_token\"]);\n      window.location.replace(`https://user-stock-funds.web.app/${response.data['access_token']}`); // let transactions = await axios.post(\"http://localhost:5000/user_transactions\", {\n      //     access_token: localStorage.getItem(\"accessToken\"),\n      //     start_date: '2018-01-01',\n      //     end_date: '2022-01-12'\n      // })\n      // transactions = transactions.data[\"transactions\"]\n      // console.log(transactions)\n      // let inv_response = await axios.post(\"http://localhost:5000/user_investments\", {\n      //     access_token: localStorage.getItem(\"accessToken\")\n      // });\n      // let investments = {\n      //     securities:inv_response.data[\"securities\"],\n      //     accounts:inv_response.data[\"accounts\"],\n      //     holdings:inv_response.data[\"holdings\"]}\n      // console.log(investments)\n    };\n\n    this.state = {\n      linkToken: \"\"\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(PlaidLink, {\n        token: this.state.linkToken,\n        clientName: \"none\",\n        env: \"sandbox\",\n        product: [\"auth\", \"transactions\", \"balance\"],\n        publicKey: \"3a209bc027bedb366c96c93878a08a\",\n        onExit: this.handleOnExit,\n        onSuccess: this.handleOnSuccess,\n        className: \"test\",\n        children: \"Open Link and connect your bank!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Link;","map":{"version":3,"sources":["/Users/keshawnsharper/Documents/Link-React-plaid/src/Link.js"],"names":["React","Component","PlaidLink","axios","Link","constructor","componentDidMount","response","post","then","console","log","data","setState","linkToken","handleOnSuccess","public_token","metadata","user_id","localStorage","setItem","window","location","replace","state","render","handleOnExit"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,IAAN,SAAmBH,SAAnB,CAA6B;AAC3BI,EAAAA,WAAW,GAAG;AACZ;;AADY,SAUdC,iBAVc,GAUM,YAAW;AAC7B,UAAIC,QAAQ,GAAG,MAAMJ,KAAK,CAACK,IAAN,CAAW,kCAAX,EAA+CC,IAA/C,EAArB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACK,IAArB;AACA,WAAKC,QAAL,CAAc;AAACC,QAAAA,SAAS,EAAEP,QAAQ,CAACK,IAAT,CAAc,YAAd;AAAZ,OAAd;AACD,KAda;;AAAA,SAgBdG,eAhBc,GAgBI,OAAOC,YAAP,EAAqBC,QAArB,KAAkC;AAClD;AACA,UAAIL,IAAI,GAAG;AACTI,QAAAA,YAAY,EAAEA,YADL;AAET;AACFE,QAAAA,OAAO,EAAC;AAHG,OAAX;AAKA,UAAIX,QAAQ,GAAG,MAAMJ,KAAK,CAACK,IAAN,CAAW,iDAAX,EAA8DI,IAA9D,CAArB;AAEAF,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBJ,QAAvB,EATkD,CAUlD;;AACAY,MAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCb,QAAQ,CAACK,IAAT,CAAc,cAAd,CAApC;AAEAS,MAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAyB,oCAAmChB,QAAQ,CAACK,IAAT,CAAc,cAAd,CAA8B,EAA1F,EAbkD,CAclD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KA7Ca;;AAGZ,SAAKY,KAAL,GAAa;AACXV,MAAAA,SAAS,EAAE;AADA,KAAb;AAID;;AAyCDW,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA,6BACI,QAAC,SAAD;AACA,QAAA,KAAK,EAAE,KAAKD,KAAL,CAAWV,SADlB;AAEA,QAAA,UAAU,EAAC,MAFX;AAGA,QAAA,GAAG,EAAC,SAHJ;AAIA,QAAA,OAAO,EAAE,CAAC,MAAD,EAAS,cAAT,EAAwB,SAAxB,CAJT;AAKA,QAAA,SAAS,EAAC,gCALV;AAMA,QAAA,MAAM,EAAE,KAAKY,YANb;AAOA,QAAA,SAAS,EAAE,KAAKX,eAPhB;AAQA,QAAA,SAAS,EAAC,MARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADF;AAgBD;;AAlE0B;;AAqE7B,eAAeX,IAAf","sourcesContent":["import React, { Component } from \"react\";\nimport {PlaidLink} from \"react-plaid-link\";\nimport axios from 'axios';\n\nclass Link extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      linkToken: \"\",\n    };\n\n  }\n\n\n  componentDidMount = async () =>{\n    var response = await axios.post(\"http://localhost:3000/link_token\").then()\n    console.log(response.data)\n    this.setState({linkToken: response.data[\"link_token\"]});\n  }\n\n  handleOnSuccess = async (public_token, metadata) => {\n    // send token to client server\n    var data = {\n      public_token: public_token,\n      // use this as the dummy user for now \n    user_id:1\n    }\n    var response = await axios.post(\"http://localhost:3000/sync_user_to_bank_account\", data)\n\n    console.log(\"response\",response)\n    //to do set accessToken into sessionStorage then move onto UI calls in other components.\n    localStorage.setItem(\"accessToken\", response.data[\"access_token\"])\n\n    window.location.replace(`https://user-stock-funds.web.app/${response.data['access_token']}`);\n    // let transactions = await axios.post(\"http://localhost:5000/user_transactions\", {\n    //     access_token: localStorage.getItem(\"accessToken\"),\n    //     start_date: '2018-01-01',\n    //     end_date: '2022-01-12'\n    // })\n    // transactions = transactions.data[\"transactions\"]\n    // console.log(transactions)\n    // let inv_response = await axios.post(\"http://localhost:5000/user_investments\", {\n    //     access_token: localStorage.getItem(\"accessToken\")\n    // });\n    // let investments = {\n    //     securities:inv_response.data[\"securities\"],\n    //     accounts:inv_response.data[\"accounts\"],\n    //     holdings:inv_response.data[\"holdings\"]}\n    // console.log(investments)\n  }\n\n   \n  render() {\n    return (\n      <div>\n          <PlaidLink\n          token={this.state.linkToken}\n          clientName=\"none\"\n          env=\"sandbox\"\n          product={[\"auth\", \"transactions\",\"balance\"]}\n          publicKey=\"3a209bc027bedb366c96c93878a08a\"\n          onExit={this.handleOnExit}\n          onSuccess={this.handleOnSuccess}\n          className=\"test\"\n        >\n          Open Link and connect your bank!\n        </PlaidLink> \n      </div>\n    );\n  }\n}\n\nexport default Link;"]},"metadata":{},"sourceType":"module"}